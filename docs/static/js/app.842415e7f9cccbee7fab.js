webpackJsonp([1],{"+cgv":function(t,e){},0:function(t,e){},"3f40":function(t,e){},"4qOc":function(t,e){},"8HWN":function(t,e){},"8NCi":function(t,e){},AjG9:function(t,e){},EiLn:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var n=s("VU/8")({name:"app"},a,!1,function(t){s("fN29")},null,null).exports,o=s("/ocq"),r=s("Sazm"),c=s.n(r).a.initializeApp({apiKey:"AIzaSyDAPPB6dn6Lb9ju4sgBPrnNts3xM7P2pQA",authDomain:"lota-de664.firebaseapp.com",databaseURL:"https://lota-de664.firebaseio.com",projectId:"lota-de664",storageBucket:"lota-de664.appspot.com",messagingSenderId:"1006947910849"}),l={name:"Navbar",data:function(){return{}},methods:{firebaseLogout:function(){c.auth().signOut().then(function(){}).catch(function(t){})}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"Navbar"}},[e("nav",{staticClass:" teal darken-1"},[e("div",{staticClass:"container"},[e("div",{staticClass:"nav-wrapper"},[e("router-link",{staticClass:"brand-logo",attrs:{to:"/panel"}},[this._v("\n          Apartment Lota\n        ")]),this._v(" "),e("ul",{staticClass:"right hide-on-med-and-down"},[e("li",[e("router-link",{attrs:{to:"/gallery"}},[this._v("Gallery")])],1),this._v(" "),e("li",[e("router-link",{attrs:{to:"/posts"}},[this._v("Posts")])],1),this._v(" "),e("li",[e("button",{staticClass:"btn waves-effect waves-light white teal-text",attrs:{type:"submit",name:"action"},on:{click:this.firebaseLogout}},[this._v("Logout")])])])],1)])])])},staticRenderFns:[]};var h={name:"Panel",components:{Navbar:s("VU/8")(l,d,!1,function(t){s("EiLn")},null,null).exports},data:function(){return{}},methods:{}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"Panel"}},[e("Navbar"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var v=s("VU/8")(h,u,!1,function(t){s("kAHC")},"data-v-fa4f4ede",null).exports,p={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"valign-wrapper center-align",attrs:{id:"Dashboard"}},[e("div",{staticClass:"full-width text-teal"},[e("h2",[this._v("Welcome to Admin Panel")])])])}]};var f=s("VU/8")({name:"Dashboard",data:function(){return{}}},p,!1,function(t){s("Vs46")},"data-v-f457b846",null).exports,_={name:"Reviews",data:function(){return{parsedData:null,parsingStartedAt:null}},methods:{runParseSession:function(){var t=this;this.$http.post("https://cors-anywhere.herokuapp.com/https://www.parsehub.com/api/v2/projects/tv-mhT6bCWX1/run","api_key=tU323y19tgeq&send_email=1",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"}}).then(function(e){t.parsingStartedAt=e.body.start_time,console.log(e.body)},function(t){console.log(t)})},getData:function(){var t=this;this.$http.get("https://cors-anywhere.herokuapp.com/https://www.parsehub.com/api/v2/projects/tv-mhT6bCWX1/last_ready_run/data",{params:{api_key:"tU323y19tgeq"}},{headers:{"Content-Type":"application/x-www-form-urlencoded","X-Requested-With":"XMLHttpRequest"}}).then(function(e){console.log("data",e.body),t.parsedData=e.body.reviews},function(t){console.log("res",t)})}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"Reviews"}},[s("div",{staticClass:"card"},[t._m(0),t._v(" "),s("div",{staticClass:"card-content"},[s("h3",[t._v("Instructions")]),t._v(" "),t._m(1),t._v(" "),t.parsingStartedAt?s("div",[s("p",[t._v("Parsing started at: "+t._s(t.parsingStartedAt.toString()))]),t._v(" "),s("p",[t._v("You will receive an email shortly")])]):t._e()]),t._v(" "),s("div",{staticClass:"card-content"},[t.parsedData?t._e():s("p",[t._v("No data parsed")]),t._v(" "),t.parsedData?s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("table",{staticClass:"table-responsive highlight"},[t._m(2),t._v(" "),s("tbody",t._l(t.parsedData,function(e){return s("tr",{key:e.username},[s("td",[s("img",{attrs:{src:e.profile}})]),t._v(" "),s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.country))]),t._v(" "),s("td",[t._v(t._s(e.reviewCount))]),t._v(" "),s("td",[t._v(t._s(e.dateOfReview))]),t._v(" "),s("td",[t._v(t._s(e.posReview))]),t._v(" "),s("td",[t._v(t._s(e.negReview))])])}))])])])]):t._e()]),t._v(" "),s("div",{staticClass:"card-action center-align"},[s("button",{staticClass:"btn waves-effect waves-light teal darken-1",attrs:{type:"submit"},on:{click:t.runParseSession}},[t._v("Run Parse Session")]),t._v(" "),s("button",{staticClass:"btn waves-effect waves-light teal darken-1",attrs:{type:"submit"},on:{click:t.getData}},[t._v("Get Data")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-content teal darken-1 white-text center-align"},[e("span",{staticClass:"card-title"},[this._v("Parse Data from Booking.com")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("1. Run parse session to crawl booking.com for new info")]),this._v(" "),e("li",[this._v("2. You will receive an email when the session has ended")]),this._v(" "),e("li",[this._v("3. Get Data to save parsed info to database")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Profile")]),e("th",[this._v("Name")]),e("th",[this._v("Country")]),e("th",[this._v("Reviews")]),e("th",[this._v("Posted At")]),e("th",[this._v("Positive")]),e("th",[this._v("Negative")])])])}]};var g=s("VU/8")(_,m,!1,function(t){s("AjG9")},"data-v-3493a2de",null).exports,w=s("c/Tr"),C=s.n(w),P=(s("3VHS"),c.firestore()),b=c.storage().ref(),y=(b.child("home"),{name:"Gallery",data:function(){return{photosToUpload:[],homePhotos:[],postPhotos:[],selectedPath:"",uploadProgress:null,uploadOn:!1,previewOn:!1,photoPreview:null}},methods:{listPhotos:function(){var t=this;this.homePhotos=[],this.postPhotos=[],P.collection("homePhotos").get().then(function(e){e.forEach(function(e){var s={id:e.id,name:e.data().name,path:e.data().path,url:e.data().url};t.homePhotos.push(s)})}),P.collection("postPhotos").get().then(function(e){e.forEach(function(e){var s={id:e.id,name:e.data().name,path:e.data().path,url:e.data().url};t.postPhotos.push(s)})})},processFiles:function(t){this.photosToUpload=t.target.files},uploadPhotos:function(){var t=this;this.uploadOn=!0;var e=this.selectedPath;C()(this.photosToUpload).forEach(function(s){var i=b.child(e+"/"+s.name).put(s);i.on("state_changed",function(t){this.uploadProgress=t.bytesTransferred/t.totalBytes*100,console.log("Upload is "+this.uploadProgress+"% done")},function(t){},function(){var a={url:i.snapshot.downloadURL,path:e+"/"+s.name,name:s.name};P.collection(e).add(a).then(function(e){t.listPhotos(),console.log("Document written with ID: ",e.id)}).catch(function(t){console.error("Error adding document: ",t)})}),t.uploadOn=!1})},deletePhoto:function(t,e){var s=this;if(confirm("Are you sure?")){b.child(t.path).delete().then(function(){}).catch(function(t){}),P.collection(e).doc(t.id).delete().then(function(t){s.listPhotos(),console.log("Document successfully deleted!")}).catch(function(t){console.error("Error removing document: ",t)})}},openPreview:function(t){this.previewOn=!0,this.photoPreview=t},closePreview:function(){this.photoPreview=null,this.previewOn=!1}},created:function(){this.listPhotos()}}),k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"Gallery"}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col m6 s12"},[s("div",{staticClass:"card"},[s("form",[s("div",{staticClass:"card-content"},[s("span",{staticClass:"card-title"},[t._v("Photo Upload")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"browser-default col s12"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedPath,expression:"selectedPath"}],attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedPath=e.target.multiple?s:s[0]}}},[s("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Choose folder")]),t._v(" "),s("option",{attrs:{value:"homePhotos"}},[t._v("Homepage")]),t._v(" "),s("option",{attrs:{value:"postPhotos"}},[t._v("News Feed")])])])]),t._v(" "),s("div",{staticClass:"file-field input-field"},[s("div",{staticClass:"btn"},[s("span",[t._v("File")]),t._v(" "),s("input",{attrs:{type:"file",multiple:"",accept:"image/*",required:""},on:{change:function(e){t.processFiles(e)}}})]),t._v(" "),t._m(0)]),t._v(" "),t.uploadOn?s("div",{staticClass:"progress"},[s("div",{staticClass:"determinate",style:{widht:t.uploadProgress+"%"}})]):t._e()]),t._v(" "),s("div",{staticClass:"card-action"},[s("button",{staticClass:"waves-effect waves-light btn",attrs:{type:"submit"},on:{click:function(e){t.uploadPhotos()}}},[t._v("Upload")])])])])]),t._v(" "),s("div",{staticClass:"col m6 s12"},[s("div",{staticClass:"card"},[t.previewOn?t._e():s("div",{staticClass:"valign-wrapper align-center minheight"},[t._m(1)]),t._v(" "),t.previewOn?s("div",{staticClass:"previewPicture valign-wrapper align-center minheight",on:{click:t.closePreview}},[s("div",{staticClass:"jcenter"},[s("img",{staticClass:"fit",attrs:{src:t.photoPreview}})])]):t._e()])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"card extra-padding"},[s("span",{staticClass:"card-title"},[t._v("News Feed")]),t._v(" "),s("table",{staticClass:"responsive-table highlight"},[t._m(2),t._v(" "),s("tbody",t._l(t.postPhotos,function(e){return s("tr",{key:e.url},[s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.path))]),t._v(" "),s("td",[s("img",{staticClass:"preview",attrs:{src:e.url},on:{click:function(s){t.openPreview(e.url)}}})]),t._v(" "),s("td",[s("i",{staticClass:"fa fa-times pointer",on:{click:function(s){t.deletePhoto(e,"postPhotos")}}})])])}))])])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"card extra-padding"},[s("span",{staticClass:"card-title"},[t._v("Homepage")]),t._v(" "),s("table",{staticClass:"responsive-table highlight"},[t._m(3),t._v(" "),s("tbody",t._l(t.homePhotos,function(e){return s("tr",{key:e.url},[s("td",[t._v(t._s(e.name))]),t._v(" "),s("td",[t._v(t._s(e.path))]),t._v(" "),s("td",[s("img",{staticClass:"preview",attrs:{src:e.url},on:{click:function(s){t.openPreview(e.url)}}})]),t._v(" "),s("td",[s("i",{staticClass:"fa fa-times pointer",on:{click:function(s){t.deletePhoto(e,"homePhotos")}}})])])}))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"file-path-wrapper"},[e("input",{staticClass:"file-path validate",attrs:{type:"text"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"jcenter"},[e("p",[this._v("Click image for preview")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Name")]),e("th",[this._v("Path")]),e("th",[this._v("Preview")]),e("th",[this._v("Options")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Name")]),e("th",[this._v("Path")]),e("th",[this._v("Preview")]),e("th",[this._v("Options")])])])}]};var A=s("VU/8")(y,k,!1,function(t){s("aUxO")},"data-v-2bc0e393",null).exports,E=s("G0J2"),O=(s("3f40"),s("4qOc"),s("+cgv"),c.firestore()),x={name:"Posts",components:{quillEditor:E.quillEditor},data:function(){return{editorOptions:{},posts:[],title:null,body:null,createdAt:null,docId:null,editOn:!1,postPhotos:[],photosOn:!1,postsLoading:!1,listingPhotos:!1}},methods:{listPosts:function(){var t=this;this.postsLoading=!0,this.posts=[],O.collection("posts").orderBy("createdAt").get().then(function(e){e.forEach(function(e){var s={id:e.id,title:e.data().title,body:e.data().body,createdAt:e.data().createdAt};t.posts.push(s)})}),this.postsLoading=!1},createPost:function(){var t=this;this.body&&this.title&&O.collection("posts").add({title:this.title,body:this.body,createdAt:new Date}).then(function(e){t.listPosts(),t.cancelPost()}).catch(function(t){return console.log(err)})},cancelPost:function(){this.title=null,this.body=null,this.editOn=!1,this.createdAt=null,this.docId=null},startEdit:function(t){this.editOn=!0,this.title=t.title,this.body=t.body,this.createdAt=t.createdAt,this.docId=t.id},updatePost:function(){var t=this,e=O.collection("posts").doc(this.docId);console.log(e),e.set({title:this.title,body:this.body,createdAt:this.createdAt,editedAt:new Date}).then(function(e){t.listPosts(),console.log("Document successfully written!",e),t.cancelPost()}).catch(function(){console.error("Error writing document: ",error)})},deletePost:function(t){var e=this;if(confirm("Are you sure?"))O.collection("posts").doc(t).delete().then(function(t){e.listPosts(),console.log("Document successfully deleted!")}).catch(function(t){console.error("Error removing document: ",t)})},listPhotos:function(){var t=this;this.photosOn=!this.photosOn,this.listingPhotos||(this.listingPhotos=!0,this.postPhotos.length>0||O.collection("postPhotos").get().then(function(e){e.forEach(function(e){var s={id:e.id,name:e.data().name,path:e.data().path,url:e.data().url};t.postPhotos.push(s)})}))},hidePhotos:function(){this.photosOn=!1},appendPhoto:function(t){this.body?this.body=this.body+'<img src="'+t+'"/>':this.body='<img src="'+t+'"/>'},appendTemplate:function(t){this.body?this.body=this.body+t:this.body=t}},created:function(){this.listPosts()}},U={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container",attrs:{id:"Posts"}},[s("form",[s("div",{staticClass:"row"},[s("div",{staticClass:"col s12 m12"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"validate",attrs:{id:"title",type:"text",placeholder:"Post Title",required:""},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col s12 m12"},[s("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOptions,required:""},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1)])]),t._v(" "),s("div",{staticClass:"card-action right-align"},[s("button",{staticClass:"pull-left waves-effect waves-light btn pointer indigo darken-1",attrs:{type:"button"},on:{click:t.listPhotos}},[t.photosOn?t._e():s("span",[t._v("Photos")]),t.photosOn?s("span",[t._v("Hide")]):t._e()]),t._v(" "),s("button",{staticClass:"waves-effect waves-teal btn-flat pointer",attrs:{type:"button"},on:{click:t.cancelPost}},[t._v("Cancel")]),t._v(" "),t.editOn?t._e():s("button",{staticClass:"waves-effect waves-light btn pointer",attrs:{type:"submit"},on:{click:t.createPost}},[t._v("Post")]),t._v(" "),t.editOn?s("button",{staticClass:"waves-light btn pointer",attrs:{type:"submit"},on:{click:t.updatePost}},[t._v("Update")]):t._e()])])])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"card"},[t.photosOn?s("div",{staticClass:"card-content align-center"},[s("div",{staticClass:"row"},t._l(t.postPhotos,function(e){return s("div",{key:e.id,staticClass:"col s12 m3"},[s("div",{staticClass:"limited-height"},[s("img",{staticClass:"fit pointer",attrs:{src:e.url,title:"Click to add to form"},on:{click:function(s){t.appendPhoto(e.url)}}})])])}))]):t._e()])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col s12"},[s("div",{staticClass:"card extra-padding"},[s("table",{staticClass:"responsive-table highlight"},[t._m(0),t._v(" "),s("tbody",t._l(t.posts,function(e){return s("tr",{key:e.id},[s("td",[t._v(t._s(e.createdAt.toString()))]),t._v(" "),s("td",[t._v(t._s(e.title))]),t._v(" "),s("td",[t._v(t._s(e.body))]),t._v(" "),s("td",[s("i",{staticClass:"fa fa-pencil pointer",on:{click:function(s){t.startEdit(e)}}}),t._v(" "),s("i",{staticClass:"fa fa-times pointer",on:{click:function(s){t.deletePost(e.id)}}})])])}))])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("CreatedAt")]),e("th",[this._v("Title")]),e("th",[this._v("Body")]),e("th",[this._v("Options")])])])}]};var N=s("VU/8")(x,U,!1,function(t){s("8HWN")},"data-v-b9860f7a",null).exports,D={name:"Login",data:function(){return{email:null,password:null,logged:null,user:null}},methods:{firebaseLogin:function(){c.auth().signInWithEmailAndPassword(this.email,this.password).then(function(t){$.push("/panel")}).catch(function(t){var e=t.code,s=t.message;console.log("error code:",e,"error message",s)})}}},L={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"valign-wrapper",attrs:{id:"Login"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col m4 offset-m4 s12"},[s("form",{on:{submit:function(e){e.preventDefault(),t.firebaseLogin(e)}}},[s("div",{staticClass:"card"},[t._m(0),t._v(" "),s("div",{staticClass:"card-content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col m10 offset-m1 s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"validate",attrs:{id:"email",type:"email",required:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),s("label",{attrs:{for:"email"}},[t._v("Email")])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"input-field col m10 offset-m1 s12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"validate",attrs:{id:"password",type:"password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("label",{attrs:{for:"password"}},[t._v("Password")])])])]),t._v(" "),t._m(1)])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-content teal darken-1 white-text center-align"},[e("span",{staticClass:"card-title"},[this._v("Apartment Lota Admin")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-action center-align"},[e("button",{staticClass:"btn waves-effect waves-light teal darken-1",attrs:{type:"submit",name:"action"}},[this._v("Login")])])}]};var R=s("VU/8")(D,L,!1,function(t){s("8NCi")},"data-v-7c4ed70e",null).exports;i.a.use(o.a);var q=new o.a({routes:[{path:"*",redirect:"/panel",meta:{requiresAuth:!0}},{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:R},{path:"/panel",component:v,children:[{path:"/",component:f},{path:"/reviews",component:g},{path:"/gallery",component:A},{path:"/posts",component:N}],meta:{requiresAuth:!0}}]});q.beforeEach(function(t,e,s){var i=c.auth().currentUser,a=t.matched.some(function(t){return t.meta.requiresAuth});a&&!i?s("login"):!a&&i?s("panel"):s()});var $=q,T=s("8+8L"),F=s("0lrd"),S=s.n(F);s("gkYU"),s("U54J");i.a.config.productionTip=!1,i.a.use(T.a),i.a.use(S.a),new i.a({el:"#app",router:$,created:function(){c.auth().onAuthStateChanged(function(t){t||$.push("/")})},template:"<App/>",components:{App:n}})},Vs46:function(t,e){},aUxO:function(t,e){},fN29:function(t,e){},gkYU:function(t,e){},kAHC:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.842415e7f9cccbee7fab.js.map